## Mensageria

### O que é?

Mensageria é um modelo de comunicação entre aplicações, onde uma aplicação (chamada de producer) envia dados como mensagens para uma fila, e outra aplicação (chamada de consumer) consome essas mensagens posteriormente.

Diferente de uma comunicação REST tradicional, onde a aplicação A envia uma requisição e precisa esperar a resposta da aplicação B, na mensageria a comunicação é assíncrona: a aplicação A (produtora) envia a mensagem para a fila e continua seu processo, mesmo que a aplicação B (consumidora) ainda não esteja pronta para responder

<br>
<hr>

### Quando usar mensageria?

- Comunicação assíncrona:

    Quando a aplicação não precisa de uma resposta imediata. A mensagem é enviada para a fila e processada depois.

<br>

- Resiliência:

    Mesmo que ocorra uma falha ou exceção durante o processamento da mensagem, o sistema pode ser configurado para tentar novamente automaticamente, sem que o produtor precise reenviar.

<br>

- Escalabilidade:

    É possível aumentar ou reduzir o número de consumidores conforme a demanda. Em horários de pico, mais instâncias podem consumir da mesma fila para manter o desempenho.

<br>
<hr>

### Comunicação síncrona e assíncrona

#### Comunicação síncrona (exemplo REST)

- A aplicação A faz uma requisição HTTP para a aplicação B e **fica esperando a resposta na hora para continuar**.

- Os dois sistemas precisam estar online ao mesmo tempo para funcionar.

<br>

#### Comunicação assíncrona (exemplo mensageria)

- A aplicação A envia uma mensagem para uma fila (por exemplo, no RabbitMQ) e **segue seu fluxo sem esperar a resposta imediata**.

- A aplicação B consome essa mensagem quando estiver pronta, podendo estar offline no momento do envio.

<br>

##### Exemplo de comunicação assíncrona no e-commerce

Quando você faz uma compra online, como no Mercado Livre:

Você finaliza o pedido e recebe uma confirmação rápida de que ele foi recebido.

Mas o pagamento e a aprovação só são processados depois, em segundo plano.

Ou seja, o sistema te responde na hora, mas o processo de pagamento acontece depois, sem te fazer esperar.

Isso é comunicação assíncrona: o sistema aceita sua mensagem e continua funcionando, enquanto processa tudo devagar e na ordem certa.

<br>
<hr>

### Message broker

Um message broker é um programa que gerencia a troca de mensagens entre sistemas. Ele recebe as mensagens de quem envia, guarda numa fila e entrega para quem vai consumir, garantindo que nada se perca. 

Resumindo, é a ferramente que vamos usar para trabalhar com mensageria.

Exemplos populares: **RabbitMQ**, Apache Kafka, ActiveMQ.